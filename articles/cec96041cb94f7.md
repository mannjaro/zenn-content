---
title: "AWS Carnibal 2023 参加記"
emoji: "🦔"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: [aws]
published: false
---

# はじめに

この記事は11/4に札幌で開催されたAWS Carnibal 2023に参加しての感想や発表された内容について書いたものです。
ちなみに私のAWSに対する経験は実務3ヶ月ほどで、初心者も初心者ですがとても楽しくタメになるものでした。

## AWS Carnibal 2023とは

イベントの配信アーカイブがあるので、そちらを見ていただくのが一番良いと思います。
https://www.youtube.com/watch?v=zMEz_NfDwKA

AWS公式コミュニティである「AWS Startup COmmunity」、「JAWS-UG」、「Amplify Japan User Group」の3つのコミュニティがコラボしたイベントです。

## track1: エネルギー会社が考えるお客様と繋がるアプリとは

会場を提供していただいた北ガスさんの提供するアプリの紹介と、そのアプリを作るにあたっての考え方についての発表でした。
エネルギー会社が提供する住宅サービスとしての、使ってもらえるアプリケーションの提供についての話でした。

### 感想

特に印象に残った点として、住まいに関する情報を一元的に可視化することで、電気代を見たい人、エアコンの温度を調整したい人、そのほか様々な情報を見たい人が、単一のアプリだけで済むようにすることで、アプリを使ってもらうことができるという点が印象的でした。

また、アプリに季節を持たせたり、ちょっとしたメッセージを載せることで、アプリを開くこと自体を楽しんでもらうことで、アプリを使ってもらうことができるという点も印象的でした。

~~私も賃貸に住んでますが、そういったアプリはほとんど見ることは無いですね...~~

## track2: サーバーレスとIoTで挑む to B 向けの省エネサービス

中小規模向けのエネルギーマネジメントシステムについての発表でした
[吸水式冷温水機](https://www.khi.co.jp/corp/kte/product/chiller/principle/)の遠隔操作、可視化サービスをSoracomとAWS IoT Coreを用いて実現したという内容でした。

### 感想

担当された方が、AWSやIoTにそれほど詳しくない状態で始めたとのことでしたが、

![yoshi.png](/images/aws-carnival/track2.png)

の精神で進めていったとのことでした。ぜひ見習いたいですね。

また、社内コミュニティを立ち上げ、JAWS-UGのような外部コミュニティの内容を積極的に取り込み、社内で扱えるように落とし込む（APIと表現されてました）ことで社内に浸透させていったという話が印象的でした。

(うちの会社でもそんな文化を醸成できるようになりたい...!)

## track3: 酪農IoTにおけるリアルタイム分析

続いて、スタートアップであるエゾウィン奥山さんの発表でした。

スタートアップ故に、要望が断続的に変化していく中で、どのようにアーキテクチャを変更していったかという話でした。
OLTPとOLAPの両方を組み合わせることでリアルタイム性とデータ分析の両方を満たすアーキテクチャを構成する。
現場で運用する中で浮上した改善点を満たすため、状況や要件、特性の整理、ER図を用いたアクセスパターン、データ特性の整理によるデータモデリングを行い、アーキテクチャに落とし込む。
要件が定まっていない中で、データの分析が一番重要であると語っておられました。

### Memo: データベースの処理体系
恥ずかしながらOLTP、OLAPは初めて聞いたのでメモ

OLTP: online transaction processing
RDS, DynamoDB
細かいデータを低いレイテンシー

OLAP: online analytical processiong
Redshift
大量のデータ分析

## Amplify ハンズオン

track3までの発表ののち、私はAmplifyのハンズオンに参加しました。
内容は以下の記事に沿って行われました。
https://zenn.dev/mjxo/articles/707ac0ac6c022a
簡単にNext.jsをAmplify上でデプロイし、ついでにCI/CDも体感するハンズオンでした。

## track4: アーキテクチャ武道会

最後に、アーキテクチャ武道会という形で、とあるスタートアップがリリースしているサービスに対する改善案を議論するという形でロールプレイングが行われました。

決済処理の非同期か

Fargateで受け取ったデータをSQSに入れバッチ処理を行う

処理をエッジに寄せる
Cloudfrontでトークンを持っているのかチェック

複雑な決済処理は後ろに持ってくるとスケーリングできる

いかに落ちないようにするアーキテクチャ vs スループットの必要ではないサービス

汎用的なサービス（誰でもチケット販売ができる） vs スループットが高い

高い負荷のサービスを別で作ってしまう

cloudflareの待合室の機能を活用する

メインの要件と大きく離れた要件が現れた時、同じサービスに乗っけるのではなく、別に分けてしまった方が使いが良い

メインにスパイク対策を入れてしまうとオーバースペックになってしまう

使い捨てのシステムでなくなってきたらメインに開発に盛り込む

常駐タイプの（Fargate）ではなく、サーバーレスアーキテクチャで実装する

スループットに注力
できるだけCDNに寄せて作る。チケット購入のトランザクション処理はCDNに

---

マネコンぽちぽちはアジリティが低い
CDKに置き換えたら教育になり、成果物としてIaCが出てくる
アカウント一つ -> ControllTowerでアカウントを管理下に

マネコンは再現性が無い
プロトタイプとして扱い、プロダクションはIaCで

動いているものをIaCで置き換える時に、コストをかけることに理解が得られない場合
- 次に新しく作るものはIaCに
- 知見が得られたらプロダクションをIaCに
